package packs_test

import (
	"marceo/library/packs"
	"strings"
	"testing"
)

type test struct {
	input  string
	expect string
}

func TestPack(t *testing.T) {
	var cases []test = []test{
		test{input: "# test 1", expect: "<h1>test 1</h1>"},
		test{input: "# **test 1**", expect: "<h1><strong>test 1</strong></h1>"},
		test{input: "# *test 1*", expect: "<h1><i>test 1</i></h1>"},
		test{input: "### [**test 1**](https://kruceo.com)", expect: "<h3><a href=\"https://kruceo.com\"><strong>test 1</strong></a></h3>"},
		test{input: "### **[test 1](https://kruceo.com)**", expect: "<h3><strong><a href=\"https://kruceo.com\">test 1</a></strong></h3>"},
		test{input: "- test 1\n- test 2", expect: "<ul><li> test 1</li><li> test 2</li></ul>"},
		test{input: "- [test 1](test)\n- **test 2**", expect: "<ul><li> <a href=\"test\">test 1</a></li><li> <strong>test 2</strong></li></ul>"},
		test{input: "teste", expect: "teste"},
		test{input: "_teste_", expect: "<i>teste</i>"},
	}

	for _, v := range cases {
		result := packs.DefaultPack.Parse(v.input)
		if strings.TrimSpace(result) != v.expect {
			t.Errorf("Fail at item %s, expected %s, received %s", v.input, v.expect, result)
		}
	}
}

func BenchmarkPack(b *testing.B) {
	accum := "### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n### **[test 1](https://kruceo.com)**\n\n_aggre_\n\n## *teste*\n\n|teste|teste|\n|---|---|\n|1|2|\n\n- ok\n- ok2\n- ok3\n"
	accum += accum
	packs.DefaultPack.Parse(accum)
}
